<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Verb Quiz 50 ‚Ä¢ Set 1 & Set 2 (Review + Quiz)</title>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600&family=Fredoka:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#F8FAFF;
      --card:#FFFFFF;
      --ink:#0F172A;
      --muted:#64748B;
      --brand:#2563EB;
      --accent:#F59E0B;
      --ok:#16A34A;
      --bad:#DC2626;
      --shadow: 0 8px 22px rgba(2,6,23,.08);
      --radius: 20px;
    }
    *{box-sizing:border-box}
    body{margin:0; background:var(--bg); color:var(--ink); font-family:"Prompt",sans-serif; display:flex; justify-content:center; min-height:100vh; padding:24px;}
    .app{width:min(980px,100%);}
    .brand{display:flex; flex-direction:column; align-items:center; gap:8px; margin-bottom:18px;}
    .logo{width:70px;height:70px;border-radius:50%;background:linear-gradient(135deg,var(--brand),var(--accent));box-shadow:var(--shadow);display:flex;align-items:center;justify-content:center;color:white;font:700 26px Fredoka;}
    .title{font:700 26px "Fredoka",sans-serif;color:var(--brand)}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:26px;text-align:center;}
    h1{font:700 clamp(22px,4.2vw,34px) "Fredoka";margin:6px 0 10px;color:var(--brand)}
    p.lead{color:var(--muted);font-size:18px}
    input[type=text], select{width:100%;padding:16px;border-radius:14px;border:2px solid #E2E8F0;font-size:18px;}
    input[type=text]:focus, select:focus{border-color:var(--brand);outline:none;}
    .btn{cursor:pointer;border:none;border-radius:14px;padding:14px 20px;font:700 18px "Fredoka";transition:.2s}
    .btn.primary{background:linear-gradient(135deg,var(--brand),var(--accent));color:white;box-shadow:0 6px 15px rgba(37,99,235,.3)}
    .btn.secondary{background:#fff;color:var(--brand);border:2px solid var(--brand)}
    .disclaimer{font-size:14px;color:#475569;margin-top:12px;background:#EFF6FF;border-left:4px solid var(--brand);padding:10px 12px;border-radius:12px;text-align:left}
    .word{font:700 clamp(36px,8vw,60px) "Fredoka";margin:10px 0;color:#111827}
    .thai{font:700 clamp(28px,7vw,48px) "Fredoka";margin:10px 0;color:#1E40AF}
    .sub{font-size:20px;color:#334155;margin-bottom:16px}
    .choices{display:grid;gap:12px;grid-template-columns:1fr;}
    @media(min-width:640px){.choices{grid-template-columns:1fr 1fr;}}
    .choice{padding:14px;border:2px solid #E2E8F0;border-radius:14px;font:700 22px "Prompt";cursor:pointer;transition:.15s;background:#fff}
    .choice.correct{border-color:var(--ok);background:#ECFDF5}
    .choice.wrong{border-color:var(--bad);background:#FEF2F2}
    .scoreBig{font:800 clamp(28px,7vw,48px) "Fredoka";color:var(--brand);margin:10px 0 0;}
    .toolbar{display:flex;gap:8px;justify-content:center;margin-top:8px;flex-wrap:wrap}
    .meta{font-size:14px;color:#64748B;margin-top:6px}
  </style>
</head>
<body>
<div class="app">
  <div class="brand">
    <div class="logo">KP</div>
    <div class="title">Kru Pai Classroom</div>
  </div>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å -->
  <section id="start" class="card">
    <h1>‚ú® Verb Quiz 50</h1>
    <p class="lead">‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô + ‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏Å‡∏£‡∏¥‡∏¢‡∏≤ ‚Ä¢ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∏‡∏î‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°</p>
    <input id="playerName" type="text" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" style="margin-bottom:10px;" />
    <select id="setPicker" style="margin-bottom:14px;">
      <option value="1">Set 1 ‚Äì ‡∏Ñ‡∏≥‡∏Å‡∏£‡∏¥‡∏¢‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (‡∏õ.4‚Äì6)</option>
      <option value="2">Set 2 ‚Äì ‡∏Ñ‡∏≥‡∏Å‡∏£‡∏¥‡∏¢‡∏≤‡∏ä‡∏∏‡∏î‡πÄ‡∏™‡∏£‡∏¥‡∏° (‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢)</option>
    </select>
    <div class="toolbar">
      <button class="btn primary" onclick="startReview()">üìñ ‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå</button>
      <button class="btn secondary" onclick="goQuiz()">‚ñ∂Ô∏è ‡πÑ‡∏õ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
    </div>
    <div class="disclaimer">
      ‚ö†Ô∏è ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á: ‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå (<em>Speech Synthesis</em>)<br>
      <strong>‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏≠‡∏≤‡∏à‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô</strong> ‡∏ï‡∏≤‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏°‡∏≤ ‡∏ì ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ
    </div>
  </section>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤ Review -->
  <section id="review" class="card" style="display:none">
    <h1>üìñ ‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå</h1>
    <div id="reviewWord" class="word">word</div>
    <div id="reviewThai" class="thai">‡∏Ñ‡∏≥‡πÅ‡∏õ‡∏•</div>
    <div class="toolbar">
      <button class="btn secondary" onclick="prevReview()">‚èÆÔ∏è ‡∏¢‡πâ‡∏≠‡∏ô</button>
      <button class="btn secondary" onclick="replayVoice()">üîä ‡∏ü‡∏±‡∏á‡∏ã‡πâ‡∏≥</button>
      <button class="btn secondary" onclick="nextReview()">‚è≠Ô∏è ‡∏Ç‡πâ‡∏≤‡∏°</button>
      <button class="btn primary" onclick="goQuiz()">‚ñ∂Ô∏è ‡πÑ‡∏õ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
    </div>
    <p class="sub" id="reviewProg">1 / 50</p>
    <div class="meta" id="setLabelReview">‡∏ä‡∏∏‡∏î: Set 1</div>
  </section>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤ Quiz (‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏™‡∏µ‡∏¢‡∏á) -->
  <section id="quiz" class="card" style="display:none">
    <h1 id="progressText">‡∏Ç‡πâ‡∏≠ 1/50</h1>
    <div id="thaiWord" class="thai">‚Ä¶</div>
    <div class="sub">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</div>
    <div id="choices" class="choices"></div>
    <div class="toolbar">
      <button class="btn secondary" onclick="resetAll()">üîÅ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
    </div>
    <div class="meta" id="setLabelQuiz">‡∏ä‡∏∏‡∏î: Set 1</div>
  </section>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå -->
  <section id="result" class="card" style="display:none">
    <div class="scoreBig" id="scoreBig">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</div>
    <p id="summary"></p>
    <div class="toolbar">
      <button class="btn primary" onclick="resetAll()">üîÅ ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà</button>
    </div>
  </section>
</div>

<script>
// ===== Datasets =====
const SET1=[
{en:"be",th:"‡πÄ‡∏õ‡πá‡∏ô, ‡∏≠‡∏¢‡∏π‡πà"},
{en:"have",th:"‡∏°‡∏µ"},
{en:"do",th:"‡∏ó‡∏≥"},
{en:"say",th:"‡∏û‡∏π‡∏î"},
{en:"go",th:"‡πÑ‡∏õ"},
{en:"get",th:"‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö"},
{en:"make",th:"‡∏ó‡∏≥, ‡∏™‡∏£‡πâ‡∏≤‡∏á"},
{en:"know",th:"‡∏£‡∏π‡πâ"},
{en:"think",th:"‡∏Ñ‡∏¥‡∏î"},
{en:"take",th:"‡πÄ‡∏≠‡∏≤, ‡∏´‡∏¢‡∏¥‡∏ö"},
{en:"see",th:"‡πÄ‡∏´‡πá‡∏ô"},
{en:"come",th:"‡∏°‡∏≤"},
{en:"want",th:"‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£"},
{en:"use",th:"‡πÉ‡∏ä‡πâ"},
{en:"find",th:"‡∏û‡∏ö, ‡∏´‡∏≤‡πÄ‡∏à‡∏≠"},
{en:"give",th:"‡πÉ‡∏´‡πâ"},
{en:"tell",th:"‡∏ö‡∏≠‡∏Å"},
{en:"work",th:"‡∏ó‡∏≥‡∏á‡∏≤‡∏ô"},
{en:"call",th:"‡πÇ‡∏ó‡∏£, ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å"},
{en:"try",th:"‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°"},
{en:"ask",th:"‡∏ñ‡∏≤‡∏°"},
{en:"need",th:"‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£"},
{en:"feel",th:"‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å"},
{en:"Become",th:"‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô"},
{en:"leave",th:"‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ, ‡∏ó‡∏¥‡πâ‡∏á‡πÑ‡∏ß‡πâ"},
{en:"put",th:"‡∏ß‡∏≤‡∏á"},
{en:"mean",th:"‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á"},
{en:"keep",th:"‡πÄ‡∏Å‡πá‡∏ö, ‡∏£‡∏±‡∏Å‡∏©‡∏≤"},
{en:"let",th:"‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï"},
{en:"begin",th:"‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô"},
{en:"help",th:"‡∏ä‡πà‡∏ß‡∏¢"},
{en:"show",th:"‡πÅ‡∏™‡∏î‡∏á"},
{en:"hear",th:"‡πÑ‡∏î‡πâ‡∏¢‡∏¥‡∏ô"},
{en:"play",th:"‡πÄ‡∏•‡πà‡∏ô"},
{en:"run",th:"‡∏ß‡∏¥‡πà‡∏á"},
{en:"move",th:"‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô, ‡∏¢‡πâ‡∏≤‡∏¢"},
{en:"like",th:"‡∏ä‡∏≠‡∏ö"},
{en:"live",th:"‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡∏≠‡∏¢‡∏π‡πà"},
{en:"believe",th:"‡πÄ‡∏ä‡∏∑‡πà‡∏≠"},
{en:"hold",th:"‡∏ñ‡∏∑‡∏≠"},
{en:"bring",th:"‡∏ô‡∏≥‡∏°‡∏≤"},
{en:"happen",th:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô"},
{en:"write",th:"‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô"},
{en:"provide",th:"‡∏à‡∏±‡∏î‡∏´‡∏≤‡πÉ‡∏´‡πâ"},
{en:"sit",th:"‡∏ô‡∏±‡πà‡∏á"},
{en:"stand",th:"‡∏¢‡∏∑‡∏ô"},
{en:"lose",th:"‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢, ‡πÅ‡∏û‡πâ"},
{en:"pay",th:"‡∏à‡πà‡∏≤‡∏¢"},
{en:"meet",th:"‡∏û‡∏ö"},
{en:"include",th:"‡∏£‡∏ß‡∏°"}
];

const SET2=[
{en:"continue",th:"‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏ï‡πà‡∏≠"},
{en:"learn",th:"‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ"},
{en:"change",th:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô"},
{en:"understand",th:"‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à"},
{en:"watch",th:"‡∏î‡∏π"},
{en:"follow",th:"‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"},
{en:"stop",th:"‡∏´‡∏¢‡∏∏‡∏î"},
{en:"create",th:"‡∏™‡∏£‡πâ‡∏≤‡∏á"},
{en:"speak",th:"‡∏û‡∏π‡∏î"},
{en:"read",th:"‡∏≠‡πà‡∏≤‡∏ô"},
{en:"spend",th:"‡πÉ‡∏ä‡πâ (‡πÄ‡∏ß‡∏•‡∏≤/‡πÄ‡∏á‡∏¥‡∏ô)"},
{en:"grow",th:"‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï"},
{en:"open",th:"‡πÄ‡∏õ‡∏¥‡∏î"},
{en:"walk",th:"‡πÄ‡∏î‡∏¥‡∏ô"},
{en:"win",th:"‡∏ä‡∏ô‡∏∞"},
{en:"offer",th:"‡πÄ‡∏™‡∏ô‡∏≠"},
{en:"remember",th:"‡∏à‡∏≥‡πÑ‡∏î‡πâ"},
{en:"love",th:"‡∏£‡∏±‡∏Å"},
{en:"consider",th:"‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤"},
{en:"buy",th:"‡∏ã‡∏∑‡πâ‡∏≠"},
{en:"wait",th:"‡∏£‡∏≠"},
{en:"serve",th:"‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£"},
{en:"die",th:"‡∏ï‡∏≤‡∏¢"},
{en:"send",th:"‡∏™‡πà‡∏á"},
{en:"build",th:"‡∏™‡∏£‡πâ‡∏≤‡∏á"},
{en:"stay",th:"‡∏û‡∏±‡∏Å‡∏≠‡∏¢‡∏π‡πà"},
{en:"fall",th:"‡∏ï‡∏Å, ‡∏•‡πâ‡∏°"},
{en:"cut",th:"‡∏ï‡∏±‡∏î"},
{en:"reach",th:"‡πÑ‡∏õ‡∏ñ‡∏∂‡∏á"},
{en:"cook",th:"‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£"},
{en:"remain",th:"‡∏¢‡∏±‡∏á‡∏Ñ‡∏á"},
{en:"suggest",th:"‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥"},
{en:"raise",th:"‡∏¢‡∏Å, ‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏î‡∏π"},
{en:"pass",th:"‡∏ú‡πà‡∏≤‡∏ô"},
{en:"sell",th:"‡∏Ç‡∏≤‡∏¢"},
{en:"decide",th:"‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à"},
{en:"return",th:"‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤, ‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"},
{en:"explain",th:"‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢"},
{en:"hope",th:"‡∏´‡∏ß‡∏±‡∏á"},
{en:"carry",th:"‡πÅ‡∏ö‡∏Å, ‡∏ñ‡∏∑‡∏≠"},
{en:"break",th:"‡∏ó‡∏≥‡πÅ‡∏ï‡∏Å"},
{en:"improve",th:"‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô"},
{en:"drive",th:"‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ"},
{en:"support",th:"‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô"},
{en:"choose",th:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å"},
{en:"eat",th:"‡∏Å‡∏¥‡∏ô"},
{en:"drink",th:"‡∏î‡∏∑‡πà‡∏°"},
{en:"teach",th:"‡∏™‡∏≠‡∏ô"},
{en:"study",th:"‡∏®‡∏∂‡∏Å‡∏©‡∏≤, ‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠"},
{en:"smile",th:"‡∏¢‡∏¥‡πâ‡∏°"}
];

// ===== Elements =====
const el={
  start:document.getElementById('start'),
  review:document.getElementById('review'),
  quiz:document.getElementById('quiz'),
  result:document.getElementById('result'),
  playerName:document.getElementById('playerName'),
  setPicker:document.getElementById('setPicker'),
  reviewWord:document.getElementById('reviewWord'),
  reviewThai:document.getElementById('reviewThai'),
  reviewProg:document.getElementById('reviewProg'),
  setLabelReview:document.getElementById('setLabelReview'),
  thaiWord:document.getElementById('thaiWord'),
  choices:document.getElementById('choices'),
  progressText:document.getElementById('progressText'),
  setLabelQuiz:document.getElementById('setLabelQuiz'),
  scoreBig:document.getElementById('scoreBig'),
  summary:document.getElementById('summary')
};

// ===== State =====
let currentSet=1;
let DATA=SET1;
let order=[],idx=0,score=0,autoTimer=null,reviewIndex=0;

// ===== Utils =====
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
function say(text){try{window.speechSynthesis.cancel();const u=new SpeechSynthesisUtterance(text);u.lang='en-US';window.speechSynthesis.speak(u);}catch(e){}}
function applySet(){
  currentSet = el.setPicker.value==='2'?2:1;
  DATA = currentSet===2? SET2 : SET1;
  el.setLabelReview.textContent = '‡∏ä‡∏∏‡∏î: Set ' + currentSet;
  el.setLabelQuiz.textContent = '‡∏ä‡∏∏‡∏î: Set ' + currentSet;
}

// ===== Review Mode (with voice + auto-advance) =====
function startReview(){
  if(!el.playerName.value.trim()){alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡πà‡∏≠‡∏ô");return;}
  applySet();
  el.start.style.display='none';el.review.style.display='block';
  reviewIndex=0;showReview(true);
}
function showReview(auto=true){
  clearTimeout(autoTimer);
  const it=DATA[reviewIndex];
  el.reviewWord.textContent=it.en;
  el.reviewThai.textContent=it.th;
  el.reviewProg.textContent=`${reviewIndex+1} / ${DATA.length}`;
  say(it.en);
  if(auto){ autoTimer=setTimeout(()=>{nextReview(true)},3000); }
}
function nextReview(autoAdvance=false){
  reviewIndex=Math.min(DATA.length-1,reviewIndex+1);
  showReview(autoAdvance);
}
function prevReview(){
  clearTimeout(autoTimer);
  reviewIndex=Math.max(0,reviewIndex-1);
  showReview(false);
}
function replayVoice(){ say(DATA[reviewIndex].en); }

// ===== Quiz Mode (NO voice) =====
function goQuiz(){
  clearTimeout(autoTimer);
  if(!el.playerName.value.trim()){alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡πà‡∏≠‡∏ô");return;}
  applySet();
  el.start.style.display='none';el.review.style.display='none';el.result.style.display='none';
  el.quiz.style.display='block';
  order=Array.from(DATA.keys());shuffle(order);idx=0;score=0;
  loadQuestion();
}
function loadQuestion(){
  const qIndex=order[idx];const item=DATA[qIndex];
  el.progressText.textContent=`‡∏Ç‡πâ‡∏≠ ${idx+1}/${DATA.length}`;
  el.thaiWord.textContent=item.th;
  const others=DATA.filter((_,i)=>i!==qIndex).map(x=>x.en);shuffle(others);
  const options=shuffle([item.en,...others.slice(0,3)]);
  el.choices.innerHTML='';
  options.forEach(opt=>{
    const b=document.createElement('button');
    b.className='choice';
    b.textContent=opt;
    b.onclick=()=>submit(opt,item.en,b);
    el.choices.appendChild(b);
  });
}
function submit(ans,correct,btn){
  const buttons=[...el.choices.children];
  buttons.forEach(b=>b.disabled=true);
  if(ans===correct){score++;btn.classList.add('correct');}else{btn.classList.add('wrong');}
  buttons.forEach(b=>{if(b.textContent===correct)b.classList.add('correct');});
  setTimeout(()=>{idx++; if(idx>=DATA.length){finish();} else {loadQuestion();}}, 900);
}
function finish(){
  el.quiz.style.display='none';el.result.style.display='block';
  el.scoreBig.textContent=`‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ ${score}/${DATA.length} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`;
  const pct=Math.round((score/DATA.length)*100);
  el.summary.textContent=`‡∏Ñ‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô ${pct}% ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‚â• 80% ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å!`;
}
function resetAll(){
  clearTimeout(autoTimer);window.speechSynthesis.cancel();
  el.playerName.value='';
  el.review.style.display='none';el.quiz.style.display='none';el.result.style.display='none';
  el.start.style.display='block';
}
</script>
</body>
</html>